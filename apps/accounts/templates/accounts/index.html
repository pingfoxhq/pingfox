{% extends "base.html" %}
{% load static %}
{% load bulma_tags %}

{% block title %}Account Settings{% endblock %}

{% block content %}

{% include 'core/islands/header.html' with heading="Account Settings" subtitle="Manage your personal info, integrations and preferences" active_tab="accounts" %}

<div class="columns is-variable is-5">

  <!-- Left Nav -->
  <div class="column is-3">
    <p class="is-size-7 er has-text-weight-semibold is-uppercase mb-2">Preferences</p>
    <aside class="menu">
      <ul class="menu-list">
        <li><a class="is-active">Account Settings</a></li>
        <li><a>Access Tokens</a></li>
        <li><a>Security</a></li>
      </ul>
    </aside>
  </div>

  <!-- Main Form Area -->
  <div class="column is-9">
    <form method="POST" enctype="multipart/form-data">
      {% csrf_token %}

      <!-- Avatar Card -->
      <div class="box mb-5">
        <div class="level is-mobile">
          <div class="level-left">
            <figure class="image is-96x96 mr-4">
              <img class="is-rounded" src="{{ user.userprofile.avatar.url }}" alt="Avatar">
            </figure>
            <div class="level-item">
              {{ pform.avatar|bulma }}
            </div>
          </div>
        </div>
      </div>

      <!-- Profile Information Card -->
      <div class="box">
        <div class="columns is-multiline">
          {% for field in uform %}
          <div class="column is-half">
            {{ field|bulma }}
          </div>
          {% endfor %}

          {% for field in pform %}
          {% if field.name != "avatar" %}
          <div class="column is-half">
            {{ field|bulma }}
          </div>
          {% endif %}
          {% endfor %}
        </div>

        <div class="is-flex is-justify-content-flex-end mt-4 pt-4" style="border-top: 1px solid #ccc;">
          <a href="{% url 'accounts:index' %}" class="button is-light is-small mr-2">Cancel</a>
          <button type="submit" class="button is-primary is-small">Save</button>
        </div>
      </div>
    </form>
  </div>
</div>

{% endblock %}
