{% extends 'base.html' %}
{% load static %}
{% block title %}Team Details - {{ team.name }}{% endblock %}

{% block content %}
<div class="is-flex is-justify-content-space-between is-align-items-center mb-4">
  <h1 class="title is-3 ">Your Teams</h1>
  <a href="{% url 'teams:create' %}" class="button is-primary is-small">+ Create New Team</a>
</div>

<p class="is-size-7  mb-5">
  Manage your teams, switch between them, or create a new one to collaborate with your members.
</p>

{% include 'core/partials/dashboard_tab.html' with active_tab="teams" %}

<div class="container px-4 pb-6 ">
  <div class="is-flex is-justify-content-space-between is-align-items-center mb-4">
    <h1 class="title is-3">{{ team.name }}</h1>
    <div class="buttons are-small">
      {% if request.user.is_authenticated and request.user == team.owner %}
      <a href="{% url 'teams:transfer_ownership' team.slug %}" class="button is-outlined is-link">Transfer Ownership</a>
      {% endif %}
      <a href="{% url 'teams:list' %}" class="button is-secondary">Back to Teams</a>
    </div>
  </div>

  <div class="box">
    <div class="is-flex is-justify-content-space-between is-align-items-center mb-4">
      <h2 class="title is-4">{{ team.plan.name }}</h2>
      {% if team.logo %}
      <figure class="image is-48x48">
        <img class="is-rounded" src="{{ team.logo.url }}" alt="{{ team.name }} Logo">
      </figure>
      {% endif %}
    </div>

    <p class="is-size-7  mb-2">
      <strong>Slug:</strong> <code>{{ team.slug }}</code>
    </p>

    <p class="is-size-7  mb-2">
      <strong>Owner:</strong> {{ team.owner.get_full_name|default:team.owner.username }}
    </p>

    <p class="is-size-7  mb-2">
      <strong>Description:</strong> {{ team.description|default:"No description provided." }}
    </p>

    <p class="is-size-7  mb-2">
      <strong>Created on:</strong> {{ team.created_at|date:"F j, Y" }}
    </p>

    <p class="is-size-7  mb-1"><strong>Members:</strong></p>
    <ul class="ml-4">
      {% for member in team.members.all %}
      <li>{{ member.get_full_name|default:member.username }}{% if member.is_owner %} (Owner){% endif %}</li>
      {% empty %}
      <li>No members in this team.</li>
      {% endfor %}
    </ul>

    {% if request.user.is_authenticated and request.user == team.owner %}
    <div class="mt-4">
      <a href="{% url 'teams:edit' team.slug %}" class="button is-small is-primary">Edit Team</a>
      <a href="{% url 'teams:transfer_ownership' team.slug %}" class="button is-small is-danger">Transfer Ownership</a>
    </div>
    {% endif %}
  </div>
</div>
{% endblock content %}
